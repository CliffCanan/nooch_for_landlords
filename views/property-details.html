<header id="header" data-ng-include src="'includes/header.html'" data-ng-controller="headerCtrl as hctrl"></header>

<ol class="breadcrumb m-b-10">
    <li><a href="#/home">Home</a></li>
    <li><a href="#/properties">All Properties</a></li>
    <li class="active">Haverford Towers</li>
</ol>

<section id="main">

    <aside id="sidebar" data-ng-include src="'includes/sidebar-left.html'" data-ng-class="{ 'toggled': mactrl.sidebarToggle.left === true }"></aside>

    <section id="content" class="p-t-5">

        <div class="container" data-ng-controller="propDetailsCtrl as pdctrl">

            <div class="block-header hidden">
                <div class="row">
                    <div class="col-sm-9 col-lg-8">
                        <h2 class="col-xs-9" style="padding:2px 0;">Add a New Property</h2>
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-xs-12 col-sm-8 col-md-9">

                    <div class="card z-depth-1">

                        <div class="card-header p-b-30">
                            <h2>Haverford Towers <small>Published &nbsp;|&nbsp; <a href="">Edit</a></small></h2>

                            <div class="propDetails_UnitsTenants c-white">
                                <span class="bgm-gray m-r-20">
                                    <i class="md-home c-gray"></i>
                                    <span class="headline">Units</span>
                                    <span class="value">8</span>
                                </span>
                                <span class="bgm-bluegray m-r-20">
                                    <i class="md-people c-bluegray"></i>
                                    <span class="headline">Tenants</span>
                                    <span class="value">14</span>
                                </span>
                                <span class="bgm-purple">
                                    <i class="md-warning c-purple"></i>
                                    <span class="headline">Past Due</span>
                                    <span class="value">2</span>
                                </span>
                            </div>
                        </div>

                        <div class="card-body card-padding p-t-30">
                            <div class="row">

                                <div class="col-xs-4">
                                    <div class="dropdown">
                                        <a class="btn btn-success btn-block" href="" data-toggle="dropdown">Charge A Tenant <i class="caret m-l-5"></i></a>

                                        <ul class="dropdown-menu dm-icon w-100">
                                            <li class="dropdown-header"><i class="md md-attach-money m-r-5"></i>For what?</li>
                                            <li><a id="secDeposit" ng-click="pdctrl.chargeTenant($event)"><i class="md md-lock-outline"></i>Security Deposit</a></li>
                                            <li><a id="rent" ng-click="pdctrl.chargeTenant($event)"><i class="md md-today"></i>Rent</a></li>
                                            <li><a id="damage" ng-click="pdctrl.chargeTenant($event)"><i class="md md-report"></i>Damage Fee</a></li>
                                            <li><a id="other" ng-click="pdctrl.chargeTenant($event)"><i class="md md-format-list-bulleted"></i>Other</a></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="col-xs-4">
                                    <a class="btn bgm-lightblue btn-block" href=""><i class="md md-add m-r-10"></i>Add Unit</i></a>
                                </div>

                                <div class="col-xs-4">
                                    <div class="dropdown">
                                        <a class="btn btn-default btn-block" href="" data-toggle="dropdown"><i class="md md-insert-comment m-r-10"></i> Send Message</i></a>

                                        <ul class="dropdown-menu dm-icon w-100">
                                            <li><a href=""><i class="md md-people"></i>To All Tenants</a></li>
                                            <li><a href=""><i class="md md-person"> </i>Pick 1 Tenant</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>

                    <!-- TABLE OF UNITS -->
                    <div class="card z-depth-1 p-t-20">

                        <!--div class="card-header">
                        </div>-->
                        <!-- TABLE CONFIGURATION & SETTINGS ARE IN "js/modules/table.js  -->
                        <div class="card-body table-responsive">
                            <table class="table table-striped table-vmiddle" id="propDetailsTbl" data-bootgrid-prop-details-table>
                                <thead>
                                    <tr>
                                        <th data-column-id="id" data-identifier="true" data-visible="false">ID</th>
                                        <th data-column-id="isEmailVer" data-visible="false"></th>
                                        <th data-column-id="isPhoneVer" data-visible="false"></th>
                                        <th data-column-id="isIdVerified" data-visible="false"></th>
                                        <th data-column-id="isBankAttached" data-visible="false"></th>
                                        <th data-column-id="lastPaymentDate" data-visible="false"></th>
                                        <th data-column-id="email" data-visible="false"></th>
                                        <th data-column-id="unit" data-formatter="unit" data-header-css-class="columnWidth-13pc" data-align="center">Unit #</th>
                                        <th data-column-id="tenant" data-formatter="tenant" data-header-css-class="text-center">Tenant</th>
                                        <th data-column-id="amount" data-formatter="amount" data-header-css-class="columnWidth-13pc" data-align="center">Rent Amount {{ctx.icon}}</th>
                                        <th data-column-id="status" data-formatter="status" data-header-css-class="text-center columnWidth-13pc" data-align="center">Status {{ctx.icon}}</th>
                                        <th data-column-id="commands" data-formatter="actions" data-sortable="false" data-align="center" data-header-css-class="text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>May 1, 2015</td>
                                        <td>j.chestnut@gmail.com</td>
                                        <td>1A</td>
                                        <td>Joey Chestnut</td>
                                        <td>800</td>
                                        <td>Paid</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>May 10, 2015</td>
                                        <td>quint.frank@gmail.com</td>
                                        <td>2B</td>
                                        <td>Frank Quinterro</td>
                                        <td>850</td>
                                        <td>Paid</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>May 12, 2015</td>
                                        <td>susieR@yahoo.com</td>
                                        <td>5C</td>
                                        <td>Susan Rice</td>
                                        <td>900</td>
                                        <td>Awaiting Payment</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>Never</td>
                                        <td>hookshot@comcast.net</td>
                                        <td>4F</td>
                                        <td>Kareem O'Leary</td>
                                        <td>470</td>
                                        <td>Past Due</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>June 1, 2015</td>
                                        <td>j.chestnut@gmail.com</td>
                                        <td>2C</td>
                                        <td>Joey Chestnut</td>
                                        <td>470</td>
                                        <td>Paid</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>Never</td>
                                        <td>j.chestnut@gmail.com</td>
                                        <td>9A</td>
                                        <td>Joey Chestnut</td>
                                        <td>800</td>
                                        <td>Past Due</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>May 15, 2015</td>
                                        <td>salvatore.m@gmail.com</td>
                                        <td>13B</td>
                                        <td>Sal Torelli</td>
                                        <td>103 Lancaster Ave</td>
                                        <td>450</td>
                                        <td>Payment Submited</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>May 1, 2015</td>
                                        <td>j.chestnut@nooch.com</td>
                                        <td>2C</td>
                                        <td>Joey Chestnut</td>
                                        <td>450</td>
                                        <td>Awaiting Payment</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>May 30, 2015</td>
                                        <td>lighteningbolt@gmail.com</td>
                                        <td>4D</td>
                                        <td>Usain Quick</td>
                                        <td>960</td>
                                        <td>Paid</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>

                <div class="col-xs-12 col-sm-4 col-md-3 propInfoSidebar">

                    <!-- PROPERTY INFO CARD -->
                    <div class="card z-depth-1" id="">

                        <div class="card-header p-b-5">
                            <h2>Property Info</h2>
                            <ul class="actions hidden-xs">
                                <li class="dropdown">
                                    <a href="" data-toggle="dropdown">
                                        <i class="md md-more-vert"></i>
                                    </a>

                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li>
                                            <a href=""><i class="md md-mode-edit m-r-10"></i>Edit</a>
                                        </li>
                                        <li>
                                            <a data-delete-prop><i class="md md-delete m-r-10"></i>Delete</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div class="card-body p-15">

                            <div class="propCard">
                                <div class="profile-view">

                                    <div class="pv-header">
                                        <div class="pv-main">
                                            <img src="img/property-pics/1.png" alt="Property Picture">
                                        </div>
                                    </div>

                                    <div class="pv-body p-0 p-b-10">
                                        <h2>Haverford Towers</h2>

                                        <ul class="p-l-10 m-t-15 f-15 address">
                                            <li><i class="md md-place"></i> 123 County Line Rd </li>
                                            <li class="address2">Philadelphia, PA 19123</li>
                                            <li><i class="md md-call"></i> (215) 321-9876<br /></li>
                                        </ul>
                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>

                    <!-- PROPERTY INFO CARD -->
                    <div class="card z-depth-1" id="">

                        <div class="card-header p-b-5">
                            <h2>Bank Account Info</h2>
                            <ul class="actions hidden-xs">
                                <li class="dropdown">
                                    <a href="" data-toggle="dropdown">
                                        <i class="md md-more-vert"></i>
                                    </a>

                                    <ul class="dropdown-menu dropdown-menu-right">
                                        <li>
                                            <a href="index.html#/profile/profile-bankaccounts"><i class="md md-account-balance m-r-10"></i>Edit Bank Accounts</a>
                                        </li>
                                        <li>
                                            <a data-ng-click="pdctrl.editAchMemo()"><i class="md md-mode-edit m-r-10"></i>Edit ACH Memo</a>
                                        </li>
                                        <li class="divider"></li>
                                        <li>
                                            <a data-delete-prop><i class="md md-delete m-r-10"></i>Delete</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div class="card-body p-15">

                            <div class="bank-container">

                                <p class="m-b-5">All rent payments for this property will be deposited into:</p>

                                <div class="m-b-15 text-center">
                                    <img class="media-object" src="img/bank-icons/boa.png">

                                    <div class="media-body p-b-10">

                                        <div class="">
                                            <h4 class="media-heading">
                                                Bank of America
                                                <span class="label label-primary m-l-5">Primary</span>
                                            </h4>
                                            Business Checking - 9876
                                        </div>

                                    </div>
                                </div>

                                <div class="f-16">
                                    <a href="index.html#/profile/profile-bankaccounts" class="btn btn-link btn-block noExtraWaves"><i class="md md-add"></i> Add Bank Account</a>
                                </div>
                            </div>

                        </div>

                    </div>

                    <!-- PAST DUE TENANTS CARD -->
                    <div class="card z-depth-1" id="pastDueTenants">

                        <div class="card-header p-b-5">
                            <h2><i class="md md-thumb-down c-red m-r-10"></i>Past Due Tenants</h2>
                        </div>

                        <div class="card-body p-25">

                            <div class="">
                                BAD PEOPLE
                            </div>

                        </div>

                    </div>

                    <!-- LAST 5 PAYMENTS CARD -->
                    <div class="card z-depth-1" id="last5payments">

                        <div class="card-header p-b-5">
                            <h2><i class="md md-restore c-green m-r-10"></i>Last 5 Payments</h2>
                        </div>

                        <div class="card-body p-25">

                            <div class="">
                                <ul>
                                    <li>1</li>
                                    <li>2</li>
                                    <li>3</li>
                                    <li>4</li>
                                    <li>5</li>
                                </ul>
                            </div>

                        </div>

                    </div>

                </div>

            </div>

        </div>
    </section>
</section>

<footer id="footer" data-ng-include src="'includes/footer.html'"></footer>

<!-- Modal - Charge Tenant -->
<div class="modal fade" id="chargeTenantModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" data-ng-controller="propDetailsCtrl as pdctrl">

            <div class="modal-header">
                <h4 class="modal-title">Send A Payment Request <i class="md md-assignment-return md-flip-horizontal text-success m-l-10 f-20"></i></h4>
                <button type="button" class="btn btn-default btn-icon modalclose" data-dismiss="modal"><i class="md md-close"></i></button>
            </div>

            <div class="modal-body">

                <form id="chargeTenantForm" class="form-horizontal form-lg" role="form">
                    
                    <div class="well">
                        <div class="f-16">Complete the following fields to send a payment request to your tenant.</div>
                    </div>

                    <div class="form-group" id="tenantGrp">
                        <label for="tenant" class="col-sm-3 control-label">To</label>
                        <div class="col-sm-9">
                            <div class="fg-line">
                                <input type="text" id="tenant" class="form-control" placeholder="eg. Arnold Palmer" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="amountGrp">
                        <label for="amount" class="col-sm-3 control-label">Amount</label>
                        <div class="col-sm-9">
                            <div class="input-group">
                                <span class="input-group-addon p-r-0"><i class="md md-attach-money c-green f-30"></i></span>
                                <div class="fg-line p-l-5">
                                    <input type='text' id="amount" class="form-control" placeholder="eg. 50.00" required>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="memoGrp">
                        <label for="memo" class="col-sm-3 control-label">Memo</label>
                        <div class="col-sm-9">
                            <div class="fg-line">
                                <input type='text' id="memo" class="form-control" placeholder="Enter any notes or description" maxlength="90">
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="recurGrp">
                        <label for="recur" class="ts-label col-sm-3 control-label">Recurring?</label>
                        <div class="col-sm-9 toggle-switch" data-ts-color="blue">
                            <span>No</span>
                            <input id="recur" type="checkbox" hidden="hidden">
                            <label for="recur" class="ts-helper"></label>
                            <span>Yes</span>
                        </div>
                    </div>

                </form>

            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" id="submitChargeTenant" class="btn btn-primary" ng-click="pdctrl.chargeTenant_Submit()">Submit</button>
            </div>

        </div>
    </div>
</div>

<!-- Modal - Edit ACH Memo -->
<div class="modal fade" id="editAchModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" data-ng-controller="propDetailsCtrl as pdctrl">

            <div class="modal-header">
                <h4 class="modal-title">Edit ACH Memo for Haverford Towers <i class="md md-assignment-return md-flip-horizontal text-success m-l-10 f-20"></i></h4>
                <button type="button" class="btn btn-default btn-icon modalclose" data-dismiss="modal"><i class="md md-close"></i></button>
            </div>

            <div class="modal-body">

                <form id="editAchMemoForm" class="form-horizontal form-lg" role="form">

                    <div class="well well-sm">
                        <div class="f-16 m-b-15">When your tenants make a paymet to you, you can edit the text of the memo line that appears on your bank statement.  This is useful to more easily keep track of payments from each tenant in your bank or accounting software.</div>
                        <div class="row">
                            <img src="../img/achMemoExample2.png" class="col-xs-12" />
                        </div>
                    </div>

                    <div class="form-group" id="achMemoGrp">
                        <label for="achMemoStyle" class="col-sm-2 control-label">ACH Memo</label>
                        <div class="col-sm-10">
                            <div class="radio m-b-15">
                                <label>
                                    <input type="radio" name="achMemoStyle" value="">
                                    <i class="input-helper"></i>
                                    Property name &nbsp;+&nbsp; Unit number
                                </label>
                            </div>

                            <div class="radio m-b-15">
                                <label>
                                    <input type="radio" name="achMemoStyle" value="">
                                    <i class="input-helper"></i>
                                    Property name &nbsp;+&nbsp; Unit number &nbsp;+&nbsp; Month
                                </label>
                            </div>

                            <div class="radio ">
                                <label>
                                    <input type="radio" name="achMemoStyle" value="">
                                    <i class="input-helper"></i>
                                    Property name &nbsp;+&nbsp; Unit number &nbsp;+&nbsp; Tenant Last Name (space permitting)
                                </label>
                            </div>
                        </div>
                    </div>

                </form>

            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" id="submitChargeTenant" class="btn btn-primary" ng-click="pdctrl.editAchMemo_submit()">Submit</button>
            </div>

        </div>
    </div>
</div>

<script>
    $(document).ready(function ()
    {
        $('#addPropWizard .finish').click(function () {
            swal({
                title: "Awesome - Unit Added",
                text: "This property has been successfully created.  Would you like to publish it so Nooch users can find it to pay their rent? (You can do this later, too.)",
                type: "success",
                showCancelButton: true,
                confirmButtonColor: "#3fabe1",
                confirmButtonText: "Yes, Publish Now",
                cancelButtonText: "No, I'll do it later!",
                closeOnConfirm: false,
                closeOnCancel: false
            }, function (isConfirm) {
                if (isConfirm)
                {
                    swal({
                        title: "You Got It!",
                        text: "Your property has been published.",
                        type: "success",
                    }, function (isConfirm) {
                        window.location.href = '#/properties';
                    });
                }
                else
                {
                    swal({
                        title: "No Problem",
                        text: "Your property has NOT been published. Before tenants can pay rent for this property, you must publish it, but you can do that later at any time.",
                        type: "warning",
                    }, function (isConfirm) {
                        window.location.href = '#/properties';
                    });
                }
            });
        });

		setTimeout(function () {
		    //$('#propertyName').focus();
		}, 200);
    });

</script>